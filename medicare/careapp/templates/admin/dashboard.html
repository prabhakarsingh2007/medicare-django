{% extends "admin/adminbase.html" %}

{% block admin_content %}

<div class="mb-10 flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
        <h1 class="text-3xl font-black text-slate-800 tracking-tight">Dashboard Overview</h1>
        <p class="text-slate-500 font-medium">Hospital ki live report aur naye updates.</p>
    </div>
    <div class="bg-white px-5 py-2.5 rounded-2xl shadow-sm border border-slate-200 flex items-center gap-3">
        <div class="w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center font-bold italic">ğŸ“…</div>
        <div>
            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Current Date</p>
            <p class="text-sm font-bold text-slate-700">{% now "M d, Y" %}</p>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-10">
    <a href="{% url 'view_doctor' %}" class="group bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 hover:shadow-xl transition-all">
        <div class="w-14 h-14 bg-blue-600 rounded-2xl flex items-center justify-center text-white mb-6 group-hover:rotate-6 transition-transform text-2xl font-bold">ğŸ‘¨â€âš•ï¸</div>
        <h3 class="text-slate-500 font-bold text-sm uppercase tracking-widest mb-1">Total Doctors</h3>
        <p class="text-4xl font-black text-slate-800">{{ doctor_count }}</p>
    </a>

    <a href="{% url 'view_patient' %}" class="group bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 hover:shadow-xl transition-all">
        <div class="w-14 h-14 bg-emerald-500 rounded-2xl flex items-center justify-center text-white mb-6 group-hover:rotate-6 transition-transform text-2xl font-bold">ğŸ‘¤</div>
        <h3 class="text-slate-500 font-bold text-sm uppercase tracking-widest mb-1">Total Patients</h3>
        <p class="text-4xl font-black text-slate-800">{{ patient_count }}</p>
    </a>

    <a href="{% url 'view_appointment' %}" class="group bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 hover:shadow-xl transition-all relative">
        <div class="absolute top-6 right-8 bg-rose-50 text-rose-600 text-[10px] font-black px-3 py-1 rounded-full border border-rose-100 uppercase">
            Today: {{ today_count }}
        </div>
        <div class="w-14 h-14 bg-rose-500 rounded-2xl flex items-center justify-center text-white mb-6 group-hover:rotate-6 transition-transform text-2xl font-bold">ğŸ“…</div>
        <h3 class="text-slate-500 font-bold text-sm uppercase tracking-widest mb-1">Total Appointments</h3>
        <p class="text-4xl font-black text-slate-800">{{ appointment_count }}</p>
    </a>
</div>

<div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden">
    <div class="p-8 border-b border-slate-50 flex justify-between items-center">
        <h2 class="text-xl font-bold text-slate-800">Recent Appointments</h2>
        <a href="{% url 'view_appointment' %}" class="text-blue-600 text-sm font-bold hover:underline">View All â†’</a>
    </div>
    <div class="overflow-x-auto">
        <table class="w-full text-left">
            <thead class="bg-slate-50/50">
                <tr>
                    <th class="p-5 text-[10px] font-black text-slate-400 uppercase tracking-widest">Patient</th>
                    <th class="p-5 text-[10px] font-black text-slate-400 uppercase tracking-widest">Doctor</th>
                    <th class="p-5 text-[10px] font-black text-slate-400 uppercase tracking-widest">Date/Time</th>
                    <th class="p-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center">Action</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-50">
                {% for appt in recent_appointments %}
                <tr class="hover:bg-slate-50/50 transition">
                    <td class="p-5">
                        <div class="font-bold text-slate-700">{{ appt.name }}</div>
                        <div class="text-[10px] text-slate-400">{{ appt.phone }}</div>
                    </td>
                    <td class="p-5 text-sm font-medium text-slate-600">Dr. {{ appt.doctor.name }}</td>
                    <td class="p-5 text-sm font-bold text-slate-500">{{ appt.date }} <span class="text-blue-500 text-[10px]">{{ appt.time }}</span></td>
                    <td class="p-5 text-center">
                        <a href="{% url 'view_appointment' %}" class="bg-slate-900 text-white px-4 py-1.5 rounded-xl text-[10px] font-bold">Details</a>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="4" class="p-10 text-center text-slate-400">No recent activity.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}